
write()
code = read("> ")   ~ get inputted code
tape = [0]          ~ initialize the tape, pointer, and loop storage 
pointer = 0
loops = []

through i, length(code) do      ~ iterate through the length of the code
    char = code[i]              ~ get the character at the current index
    
    given that char == ">" do
        pointer = pointer + 1                       ~ move pointer right
        given that length(tape) <= pointer do
            tape = tape + [0]                       ~ increase tape size if necessary (from the right)
        concur
    concur

    given that char == "<" do
        pointer = pointer - 1           ~ move pointer left
        given that pointer < 0 do
            pointer = 0
            insert(tape, 0, 0)          ~ increase tape size if necessary (from the left)
        concur
    concur

    given that char == "+" do
        tape[pointer] = (tape[pointer] + 1) % 256       ~ increment the value under the pointer, overflowing to 0 at 256
    concur

    given that char == "-" do
        tape[pointer] = (tape[pointer] - 1) % 256       ~ decrement the value under the pointer, underflowing to 255 at -1
    concur

    given that char == "[" do
        loops = loops + [i]         ~ store this index as the start of a loop
    concur

    given that char == "]" do
        given that tape[pointer] == 0 and length(loops) > 0 do
            pop(loops, -1)      ~ exit the loop if the value under the pointer is 0
        otherwise
            i = loops[-1]       ~ otherwise restart the loop
        concur
    concur

    given that char == "." do
        write(tape[pointer], true)      ~ print the number under the pointer
    concur

    given that char == "," do
        input = number(read())      ~ take a number as input
        as long as input < 0 do
            input = input + 256
        concur

        input = input % 256

        tape[pointer] = input       ~ store the number at the location under the pointer
    concur
concur

write()
