
write()
code = read("> ")   ~ get inputted code
tape = [0]          ~ initialize the tape, pointer, and loop storage 
pointer = 0
loops = []

through i, length(code) do      ~ iterate through the length of the code
    chr = code[i]              ~ get the chracter at the current index
    
    given that chr == ">" do
        pointer = pointer + 1                       ~ move pointer right
        given that length(tape) <= pointer do
            tape = tape + [0]                       ~ increase tape size if necessary (from the right)
        concur
    concur

    given that chr == "<" do
        pointer = pointer - 1           ~ move pointer left
        given that pointer < 0 do
            pointer = 0
            insert(tape, 0, 0)          ~ increase tape size if necessary (from the left)
        concur
    concur

    given that chr == "+" do
        tape[pointer] = (tape[pointer] + 1) % 256       ~ increment the value under the pointer, overflowing to 0 at 256
    concur

    given that chr == "-" do
        tape[pointer] = (tape[pointer] - 1) % 256       ~ decrement the value under the pointer, underflowing to 255 at -1
    concur

    given that chr == "[" do
        loops = loops + [i]         ~ store this index as the start of a loop
    concur

    given that chr == "]" do
        given that tape[pointer] == 0 and length(loops) > 0 do
            pop(loops, -1)      ~ exit the loop if the value under the pointer is 0
        otherwise
            i = loops[-1]       ~ otherwise restart the loop
        concur
    concur

    given that chr == "." do
        write(char(tape[pointer]), true)      ~ print the chracter of the number under the pointer
    concur

    given that chr == "," do
        input = Zilch
        as long as not input do
            input = read()          ~ take a chracter as input
        concur

        input = ord(input[0]) % 256     ~ convert chracter to number
        tape[pointer] = input           ~ store the number at the location under the pointer
    concur
concur

write()
